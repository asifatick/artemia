var artemia=function(){var b={Interface:{storeType:"",storeName:"",isAvailable:function(){},get:function(){},remove:function(){},save:function(){},all:function(){},drop:function(){}}};b.interfaceIsImplemented=function(a){for(var d in b.Interface)if(b.Interface.hasOwnProperty(d))if(a[d]){if(typeof b.Interface[d]!==typeof a[d])throw"artemia : "+a.storeType+" Storage : '"+d+"' ("+typeof a[d]+") : bad type";}else throw"artemia : "+a.storeType+" Storage : '"+d+"' method is missing";};b.getStore=function(a){var d=
b["get_"+a.type.toUpperCase()+"_store"](a.base,a.type,a.domain);b.interfaceIsImplemented(d);d.query=function(d,e){var h=[],c;this.all(function(a){for(var b in a)a.hasOwnProperty(b)&&(c=d(a[b]))&&h.push(c);e&&e(h)});return a.type!="sqlite"?{sum:function(a){c=b.sum(h);a&&a(c);return c},min:function(a){c=b.min(h);a&&a(c);return c},max:function(a){c=b.max(h);a&&a(c);return c},product:function(a){c=b.product(h);a&&a(c);return c}}:null};return d};b.allDbs=function(){};b.guidGenerator=function(){var a=function(){return((1+
Math.random())*65536|0).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};b.sum=function(a){var d,b=0;for(d in a)a.hasOwnProperty(d)&&(b+=a[d]);return b};b.product=function(a){var d,b=1;for(d in a)a.hasOwnProperty(d)&&(b*=a[d]);return b};b.min=function(a){return Math.min.apply(Math,a)};b.max=function(a){return Math.max.apply(Math,a)};return b}();artemia=function(b){function a(a,f,e){return{storeType:e,storeName:f,isAvailable:function(){try{a.setItem("testKey","testValue"),a.removeItem("testKey")}catch(b){return!1}return!0},get:function(b,c){var g=JSON.parse(a.getItem(this.storeName+"|"+b));g?(g.key=b,c(g)):c(null)},remove:function(b,c){var g=this.storeName+"|"+(typeof b==="string"?b:b.key);a.removeItem(g);c&&c(g)},save:function(h,c){var g=this.storeName+"|"+(h.key||b.guidGenerator());delete h.key;a.setItem(g,JSON.stringify(h));h.key=g.split("|")[1];
c(h)},all:function(b){var c=[],g,e=a.length,f,i,j;for(g=0;g<e;g+=1)if(f=a.key(g),j=f.split("|")[0],i=f.split("|").slice(1).join("|"),j===this.storeName)f=JSON.parse(a.getItem(f)),f.key=i,c.push(f);b(c)},drop:function(a){var b=this;this.all(function(a){for(var d in a)a.hasOwnProperty(d)&&b.remove(a[d].key,null)});a&&a()}}}b.get_SESSION_store=function(b,f){var e=a(window.sessionStorage,b,f);e.isAvailable()||(e=null);return e};b.get_LOCAL_store=function(b,f){var e=a(window.localStorage,b,f);e.isAvailable()||
(e=null);return e};b.get_GLOBAL_store=function(b,f,e){b=a(window.globalStorage[e],b,f);b.isAvailable()||(b=null);return b};return b}(artemia);