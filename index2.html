<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title></title>
    <script type="text/javascript" src="js/artemia.js"></script>
    <script type="text/javascript" src="js/plugins/artemia.HTML5Storage.js"></script>
    <script type="text/javascript" src="js/plugins/artemia.GlobalStorage.js"></script>
    <script type="text/javascript" src="js/plugins/artemia.UserDataStorage.js"></script>
</head>
<body>

</body>

<script>

    //var ls = artemia.getStore({type:'global',base:'myfirstbase'});
    var ls = artemia.getStore({type:'local',base:'myfirstbase'});

    ls.get('key001',function(r){console.log(r);})
    ls.get('key000',function(r){console.log(r);})

    ls.all(function(r){console.log(r);});

    /*var ls2 = artemia.getStore({type:'local',base:'mysecondbase'});

    ls2.remove('key000',function(r){console.log(r);});
    ls2.remove('key001',function(r){console.log(r);});
    ls2.remove('key003',function(r){console.log(r);});
    */

    //ls.drop(function(){console.log("nuked");});


    var mapFunction = function(doc){
      if (doc.title=="Salut")
        return doc
    };

    ls.query(mapFunction,function(r){
        console.log(r);
    })

    var sum=0;
    var sumFunction = function(doc){
        return doc.price;
    }

    ls.query(sumFunction,function(r){
        console.log(r);
    }).sum(function(r){console.log(r);})
    
    var z = ls.query(sumFunction).sum();

    console.log(z);

</script>
</html>